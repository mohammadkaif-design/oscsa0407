#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h>      // For open
#include <unistd.h>     // For read, write, close, lseek
#include <string.h>     // For strlen

int main() {
    int fd;
    char buffer[100];
    ssize_t bytesRead;

   
    fd = open("example.txt", O_CREAT | O_RDWR, 0644);
    if (fd < 0) {
        perror("Error opening file");
        exit(1);
    }
    printf("File created/opened successfully!\n");

    
    char text[] = "Hello, this is a UNIX system call demo.\n";
    if (write(fd, text, strlen(text)) < 0) {
        perror("Error writing to file");
        close(fd);
        exit(1);
    }
    printf("Data written to file.\n");

    
    lseek(fd, 0, SEEK_SET);

    
    bytesRead = read(fd, buffer, sizeof(buffer) - 1);
    if (bytesRead < 0) {
        perror("Error reading file");
        close(fd);
        exit(1);
    }
    buffer[bytesRead] = '\0';  // Null terminate string
    printf("Data read from file: %s", buffer);

    
    close(fd);
    printf("\nFile closed successfully!\n");

    return 0;
}
